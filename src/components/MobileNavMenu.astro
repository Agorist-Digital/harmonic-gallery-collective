---
export type Props = {
    targetId: string;
}

let { targetId } = Astro.props
---
<script>
    // Attach hamburger menu target class to target element
    let targetElement = document.querySelector(`#targetId`)

    if (targetElement) {
        targetElement.classList.add('hamburger-menu-target')
    }
</script>

<input type="checkbox" id="hamburger-menu-btn" />

<style is:global>
    input#menu {
        --s: 0.5rem; /* control the size */

        border: none;
        background: none;
        padding: 0;
        margin: calc(2 * var(--s)) 0;
        cursor: pointer;
        height: var(--s);
        aspect-ratio: 5/1;
        border-radius: 100px;
        display: inline-block;
        position: relative;
        transition: 0.5s;
        box-shadow: 
            0 calc(2 * var(--s)) 0 #201335, 
            0 calc(-2 * var(--s)) 0 #201335;
        -webkit-appearance:none;
        -moz-appearance:none;
        appearance:none;
    }
        
    input#menu:before,
    input#menu:after {
        content: "";
        position: absolute;
        inset: calc(-2 * var(--s)) 0;
        transition: 0.4s;
        background: 
            radial-gradient(farthest-side, #201335 98%, #20133500) 0 / var(--s) var(--s) repeat-x,
            linear-gradient(#201335 0 0) 50% / calc(100% - var(--s)) var(--s) no-repeat;
    }

    input#menu:focus-visible {
        outline: none;
    }

    input#menu:focus-visible::before {
        outline: 1px solid;
        outline-offset: 5px;
    }

    input#menu:hover {
        box-shadow: 
            0 calc(1.6 * var(--s)) 0 #201335, 
            0 calc(-1.6 * var(--s)) 0 #201335;
    }

    input#menu:checked {
        box-shadow: 
            0 calc(6 * var(--s)) 0 #20133500, 
            0 calc(-6 * var(--s)) 0 #20133500;
    }

    input#menu:checked::before,
    input#menu:checked::after {
        transform: rotate(45deg);
        transition: 0.6s 0.1s;
    }

    input#menu:checked::after {
        transform: rotate(-45deg);
    }

    input#menu:checked ~ .hamburger-menu-target {
        --hamburger-menu-active: true
        display: flex;
        visibility: visible;
        opacity: 1;
        transform: translateX(-100%);
        transition: transform 0.6s ease-in-out;
        transform: none;
    }
</style>